<ng-container *ngIf="!showContacts">

    <div class="card">
        <div class="card-header" translate>
            ui.order-mgr.contact-select2.title
        </div>
        <div class="card-body">
            <form #contactForm="ngForm">
                <div class="row {{css_cls_row}}">
                    <div class="col">
                        <ngx-altea-label-control label="objects.contact.first" for="first">
                            <input required type="text" id="first" name="first" class="form-control"
                                [(ngModel)]="contact.first">
                        </ngx-altea-label-control>
                    </div>
                </div>
                <div class="row {{css_cls_row}}">
                    <div class="col">
                        <ngx-altea-label-control label="objects.contact.last" for="last">
                            <input required type="text" id="last" name="last" class="form-control"
                                [(ngModel)]="contact.last">
                        </ngx-altea-label-control>
                    </div>
                </div>
                <div class="row {{css_cls_row}}">
                    <div class="col">
                        <ngx-altea-label-control label="objects.contact.email" for="email">
                            <input required type="text" id="email" name="email" class="form-control"
                                [(ngModel)]="contact.email">
                        </ngx-altea-label-control>
                    </div>
                </div>


                <int-phone-edit [(phone)]="contact.mobile" (phoneChange)="formChanged('contact')"></int-phone-edit>


                <!-- Allowed message types  -->
                <div class="row {{css_cls_row}}">
                    <div class="col">

                        <span>Communicatie voorkeur:</span>

                        <div class="form-check form-switch ms-3 mt-1" *ngFor="let msgType of msgTypes">
                            <input type="checkbox" class="form-check-input" [id]="msgType.key" [name]="msgType.key" [disabled]="!canSelectMsgType(msgType.key)" [checked]="contact.msgTypeSelected(msgType.key)" (change)="contact.selectMsgType(msgType.key, $event.target['checked'])">
                            <label class="form-check-label" for="news">{{'enums.msg-type.' + msgType.key |
                                translate:translateParam}}</label>
                        </div>
                    </div>
                </div>


                <div class="row {{css_cls_row}}">
                    <div class="col">
                        <div class="form-check form-switch">
                            <input type="checkbox" class="form-check-input" id="news" name="news" [disabled]="!contact.email"
                                [(ngModel)]="contact.news">
                            <label class="form-check-label" for="news">{{'objects.contact.news' |
                                translate:translateParam}}</label>
                        </div>
                    </div>
                </div>
                <div class="row {{css_cls_row}}" *ngIf="isNew">
                    <div class="col">
                        <div class="d-grid gap-2">
                            <button class="btn btn-primary" translate (click)="searchContact()"
                                [disabled]="!contactForm.form.valid">dic.continue</button>
                        </div>
                    </div>
                </div>

                <!-- contactForm.form.pristine ||           msg.save-->
                <div class="row {{css_cls_row}}" *ngIf="!isNew">
                    <div class="col">
                        <div class="d-grid gap-2">
                            <button class="btn btn-primary" translate (click)="updateContact()"
                                [disabled]="!contactForm.form.valid">dic.continue</button>
                        </div>
                    </div>
                </div>


            </form>


        </div>
    </div>


</ng-container>


  

<ng-container *ngIf="showContacts">

    <div class="card">
        <div class="card-header" translate>
            ui.order-mgr.contact-select2.my-profile
        </div>
        <div class="card-body">

            <ng-container *ngIf="contactsFound()">

                <div translate>ui.order-mgr.contact-select2.select</div>

                <ul class="list-group mt-3 mb-4">
                    <li class="list-group-item list-group-item-success" (click)="selectContact(contact)"
                        *ngFor="let contact of contacts">
    
                        <div class="row">
                            <div class="col-6">{{contact.name}}</div>
                            <div class="col-6"><span class="float-end">{{contact.mobile}}</span></div>
                        </div>
                        <div class="row">
                            <div class="col-12">{{contact.email}}</div>
                        </div>
    
                    </li>
                </ul>

            </ng-container>


            <div translate>ui.order-mgr.contact-select2.new</div>

            <ul class="list-group mt-3">
                <li class="list-group-item list-group-item-primary py-3" *ngIf="isNew" (click)="createAsNew()">
                    Maak nieuw profiel:

                    <div class="ms-3">
                        {{contact.name}}<br>
                        {{contact.email}}<br>
                        {{contact.mobile}}
                    </div>

                </li>
                <li class="list-group-item list-group-item-secondary py-3" (click)="editContact()">

                    Mijn gegevens aanpassen.

                </li>
            </ul>

        </div>
    </div>

</ng-container>