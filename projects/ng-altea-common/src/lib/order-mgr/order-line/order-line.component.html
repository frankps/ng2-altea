<div class="card" *ngIf="orderLine">

    <ng-container>

        <div class="card-header">

            <div class="row">
                <div class="col d-flex justify-content-start align-items-center">

                    <ng-select id="qty" name="qty" style="width: 60px;" [items]="qtyArray" [clearable]="false"
                        [multiple]="false" [(ngModel)]="orderLine.qty" (change)="qtyChanged()">
                    </ng-select>

                    &nbsp;&nbsp;x&nbsp;
  
                    {{orderLine.descr}}

                </div>
                <div class="col-3">
                    <span class="float-end"> <span *ngIf="product.priceFrom"
                            translate>objects.product.priceFrom-app</span> {{orderLine.incl}} â‚¬  <sup *ngIf="product.priceInfo">*</sup></span>
                </div>
            </div>

            <div class="row mt-2" *ngIf="product.minQty > 1">
                <div class="col">
                    <span style="font-size: smaller; text-align: left;" translate [translateParams]="{min: product.minQty}">objects.product.minQty-app</span>
                </div>
            </div>

            <div class="row mt-2" *ngIf="product.priceFrom">
                <div class="col">
                    <span class="float-end" style="font-size: smaller; text-align: right;"><sup>*</sup> <span translate>objects.product.priceFrom-info</span></span>
                </div>
            </div>


        </div>
        <div class="card-body">

            {{product?.descr}}

            <ng-container *ngIf="orderLineOptions">
                <div class="mt-4">
                    <ng-container *ngFor="let option of orderLineOptions; let idx = index">

                        <ng-container *ngIf="product.options[idx].multiSelect; else optionValueSingleSelect">

                            <div class="row mt-1">
                                <div class="col">{{option.name}}</div>
                            </div>

                            <div class="row mt-1" *ngFor="let value of option.values">
                                <div class="col-1"></div>
                                <div class="col">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="value_{{value.id}}"
                                            [checked]="orderLine.optionValueSelected(option, value.id)"
                                            (change)="multiOptionValueChanged(option, value, $event.target['checked'])" />
                                        <label class="form-check-label" for="value_{{value.id}}">{{value.name}}</label>

                                        <span class="float-end">{{value.prc}} {{sessionSvc.currencySymbol}}</span>
                                    </div>

                                    <!-- checked="true" -->

                                </div>
                            </div>




                            <!-- Multi -->

                        </ng-container>

                        <ng-template #optionValueSingleSelect>
                            <div class="row mt-1">
                                <div class="col-6">{{option.name}}</div>
                                <div class="col-6">
                                    <ng-select id="option_{{option.id}}" name="option_{{option.id}}"
                                        [items]="option.values" bindLabel="name" [clearable]="false" [multiple]="false"
                                        [(ngModel)]="orderLine.getOption(option).values[0]"
                                        (change)="optionChanged(option, $event)">
                                    </ng-select>
                                </div>
                            </div>
                        </ng-template>






                    </ng-container>
                </div>


            </ng-container>


            <div class="row mt-4" *ngIf="orderMgrSvc.orderLineIsNew">
                <div class="col-5 d-grid">
                    <button type="button" class="btn btn-outline-secondary float-end" (click)="goBack()"><i
                            class="fa-solid fa-backward-step"></i> &nbsp; {{ 'dic.back' | translate }} </button>
                </div>
                <div class="col-7 d-grid">
                    <button type="button" class="btn btn-outline-primary" (click)="addOrderLine(orderLine)"><i
                            class="fa-solid fa-circle-plus fa-lg"></i> &nbsp; {{ 'dic.add'
                        | translate }} </button>
                </div>
            </div>




            <!--             <div class="d-grid mt-3">

                <button *ngIf="orderMgrSvc.orderLineIsNew" type="button" class="btn btn-outline-secondary float-end"
                    (click)="addOrderLine(orderLine)"><i class="fa-solid fa-circle-plus fa-lg"></i> &nbsp; {{ 'dic.add'
                    | translate }} </button>
            </div> -->

            <div class="row mt-4" *ngIf="!orderMgrSvc.orderLineIsNew">
                <div class="col-5 d-grid">
                    <button type="button" class="btn btn-outline-secondary float-end" (click)="deleteOrderLine()"><i
                            class="fa-solid fa-trash-can"></i> &nbsp; {{ 'dic.delete' | translate }} </button>
                </div>
                <div class="col-7 d-grid" *ngIf="showConfirm">
                    <button type="button" class="btn btn-outline-primary float-end" (click)="triggerConfirm()"><i
                            class="fa-solid fa-circle-check"></i> &nbsp; {{ 'dic.confirm' | translate }} </button>
                </div>
            </div>


            <!--             <div class="d-grid mt-3">
                <button *ngIf="!orderMgrSvc.orderLineIsNew" type="button" class="btn btn-outline-secondary float-end" (click)="triggerConfirm()"
                    ><i class="fa-solid fa-circle-check"></i> &nbsp; {{ 'dic.confirm' | translate }} </button>
            </div> -->


        </div>
    </ng-container>

</div>